/* css/combat-table.css */

.table-scroll-container {
  flex: 1 1 auto;
  overflow: auto;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding-top: 8px;
}

#tracker-table {
  box-sizing: border-box;
  width: 95%;
  min-width: 1150px;
  --cols:
    minmax(40px, 0.4fr)
    minmax(60px, 0.7fr)
    minmax(56px, 0.7fr)
    minmax(120px, 1.5fr)
    minmax(60px, 0.7fr)
    minmax(120px, 1.1fr)
    minmax(70px, 0.8fr)
    minmax(160px, 2fr)
    minmax(84px, 0.4fr)
    minmax(150px, 1.2fr)
    minmax(60px, 0.5fr);
}

#tracker-table > .tracker-table-header,
#combatant-list-body > .tracker-table-row {
  display: grid;
  grid-template-columns: var(--cols);
  gap: 8px;
  padding: 6px 8px;
  align-items: center;
}

#tracker-table > .tracker-table-header {
  background: #f6e4c1;
  border-bottom: 2px solid #d0bfa2;
  color: #5c5c5c;
  font: 700 0.8rem/1.2 sans-serif;
  text-transform: uppercase;
}

#combatant-list-body > .tracker-table-row {
  background: #fff;
  border-bottom: 1px solid #e0e0e0;
  transition: background-color .2s ease;
}

#combatant-list-body > .tracker-table-row:nth-child(even) { background: #fbf7eb; }
#combatant-list-body > .tracker-table-row:hover { background:#f1f8ff; }

/* === CELL ALIGNMENT & STYLES === */
.cell { display:flex; align-items:center; }
.select-cell, .image-cell, .init-cell, .ac-cell, .hp-cell, .temp-hp-cell,
.status-cell, .role-cell, .actions-cell, .dashboard-link-cell {
  justify-content: center;
}
.name-cell { justify-content: flex-start; font-weight:700; }
.image-cell img { width:60px; height:60px; border-radius:50%; object-fit:cover; }
.select-cell input { transform: scale(1.2); cursor: pointer; }
.hp-cell { gap: 0.5rem; font-weight: bold; }
.hp-heart { color: #e53935; font-size: 1.2em; }
.actions-cell .btn-group { display: flex; gap: 4px; }
.status-cell button, .actions-cell .btn-group button, .dashboard-link-cell button {
  background-color: transparent; border: 1px solid #bdbdbd; border-radius: 4px;
  cursor: pointer; padding: 4px 8px; font-size: 0.8rem;
}

/* === SELECTION & LOCKING === */
#combatant-list-body > .tracker-table-row.selected {
  background-color: #e3f2fd !important;
}
#tracker-table.selection-locked .select-cell {
  visibility: hidden;
}

/* === GROUP STYLES === */
.group-row {
  grid-column: 1 / -1;
  display: flex;
  align-items: center;
  padding: 8px 16px;
  background-color: #e6d3b0;
  border-top: 2px solid #d0bfa2;
  border-bottom: 2px solid #d0bfa2;
  font-weight: bold;
  cursor: pointer;
  transition: background-color 0.2s ease;
}
.group-row:hover { background-color: #d0bfa2; }
.group-row .group-icon { margin-right: 12px; font-size: 1.2em; }

#combatant-list-body > .tracker-table-row.in-group {
  background-color: #f3e9d4 !important;
  border-left: 4px solid #d0bfa2;
}
.tracker-table-row.in-group .init-cell { display: none; }
.tracker-table-row.in-group .image-cell {
  grid-column: 2 / span 2;
  justify-content: flex-start;
  padding-left: 15px;
}

/* === MODAL STYLES (FOR GROUPING) === */
/* css/combat-table.css */

/* ... (all previous CSS is correct) ... */


/* === MODAL STYLES (FOR GROUPING) === */
.modal-overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background-color: rgba(0, 0, 0, 0.6);
  display: flex; justify-content: center; align-items: center;
  z-index: 200; opacity: 0; visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}
.modal-overlay:not(.hidden) { opacity: 1; visibility: visible; }
.modal-content {
  background: #fbf7eb; padding: 2rem; border-radius: 8px;
  width: 90%; max-width: 450px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  border: 2px solid #d0bfa2;
}
.modal-content h3 { margin-top: 0; font-family: "Georgia", serif; }
.modal-content .form-group { margin-bottom: 1rem; }
.modal-content label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
.modal-content select { width: 100%; padding: 10px; border: 1px solid #d0bfa2; border-radius: 4px; font-size: 1rem; }
.modal-actions { display: flex; justify-content: flex-end; gap: 0.5rem; margin-top: 1.5rem; }

/* ADDED: This rule restores the button styling inside the modal */
.modal-actions .btn {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  white-space: nowrap;
  font-size: clamp(0.72rem, 1vw + 0.2rem, 1rem);
  padding: 0.35rem 0.6rem;
  background-color: #7fb069;
  color: #fff;
  border: 1px solid #6ca05b;
  border-radius: 4px;
  cursor: pointer;
}
.modal-actions .btn:hover {
  background-color: #6ca05b;
}

/* css/combat-table.css */

/* ... (all other CSS rules are correct) ... */



/* === BULK ACTIONS BAR (RESTORED) === */
.bulk-actions-bar {
  display: none; /* Hidden by default */
  grid-template-columns: auto 1fr auto; /* Counter | Spacer | Actions */
  align-items: center;
  gap: 1rem;
  width: 100%;
  box-sizing: border-box;
  padding: 0.5rem 1rem; /* Slimmer padding */
  background-color: #f6e4c1;
  border-top: 2px solid #d0bfa2;
  border-bottom: 2px solid #d0bfa2;
}

.bulk-actions-bar.visible {
  display: grid; /* Show when you add .visible */
}

#selectionCounter { 
  font-weight: 700; 
}

.bulk-actions-actions {
  display: grid;
  grid-auto-flow: column;
  justify-content: flex-start; /* Pushes buttons to the right */
  gap: 0.5rem;
  max-width: 100%;
  overflow-x: auto;
}

.bulk-actions-actions button {
  white-space: nowrap;
  background-color: #7fb069;
  color: #fff;
  border: 1px solid #6ca05b;
  border-radius: 4px;
  padding: 0.45rem 0.8rem;
  font-size: clamp(0.4rem, 0.6vw + 0.3rem, 1rem);
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.bulk-actions-actions button:hover { 
  background-color: #6ca05b; 
}

/* Responsive styles for the bulk actions bar */
@media (max-width: 800px) {
  .bulk-actions-bar {
    grid-template-columns: 1fr;
    row-gap: 0.5rem;
  }
  .bulk-actions-actions {
    grid-auto-flow: row;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    justify-content: stretch;
  }
}


/* === MODAL STYLES (FOR GROUPING) === */
/* ... (modal styles follow) ... */